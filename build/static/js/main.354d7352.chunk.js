(this.webpackJsonpdealdataupload=this.webpackJsonpdealdataupload||[]).push([[0],{381:function(e,t,a){e.exports=a(760)},583:function(e,t,a){},759:function(e,t,a){},760:function(e,t,a){"use strict";a.r(t);a(382),a(392),a(578);var n=a(0),l=a.n(n),r=a(27),o=a.n(r),i=a(157),c=a(97),s=a(98),u=a(107),d=a(106),m=a(78),f=a(765),p=a(181),h=a(764),g=a(766),v=a(767),b=a(775),E=a(768),y=a(769),N=(a(583),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).toggleNavbar=n.toggleNavbar.bind(Object(p.a)(n)),n.state={collapsed:!0},n}return Object(s.a)(a,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return l.a.createElement("header",null,l.a.createElement(h.a,{className:"navbar-expand-sm navbar-toggleable-sm ng-white border-bottom box-shadow mb-3",light:!0},l.a.createElement(f.a,null,l.a.createElement(g.a,{tag:i.b,to:"/"},"Deal Data Upload"),l.a.createElement(v.a,{onClick:this.toggleNavbar,className:"mr-2"}),l.a.createElement(b.a,{className:"d-sm-inline-flex flex-sm-row-reverse",isOpen:!this.state.collapsed,navbar:!0},l.a.createElement("ul",{className:"navbar-nav flex-grow"},l.a.createElement(E.a,null,l.a.createElement(y.a,{tag:i.b,className:"text-dark",to:"/"},"Home")))))))}}]),a}(n.Component));N.displayName=N.name;var w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(N,null),l.a.createElement(f.a,null,this.props.children))}}]),a}(n.Component);w.displayName=w.name;var k=a(374),O=a(239),j=a(200),x=a.n(j),D=a(338),S=a.n(D),L=(a(614),a(770)),C=a(773),U=a(133),M=a(71),I=a(776),V=a(772),B=a(771),A=a(80),F=a(774),W=L.a.Column,Y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleUpload=function(){var e=n.state.fileList,t=new FormData;e.forEach((function(e){t.append("files",e)})),n.setState({uploading:!0}),n.setState({uploading:!0});x.a.post("/api/Deal",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){n.setState({fileList:[],uploading:!1}),Object(O.isNullOrUndefined)(e.data.deals)||n.setState({deals:e.data.deals}),n.getMostSoldVehicles(),Object(O.isNullOrUndefined)(e.data.errors)?C.b.success("upload successfully."):n.setState({errors:e.data.errors})})).catch((function(e){console.log(e),n.setState({uploading:!1}),C.b.error("upload failed.")}))},n.priceformat=function(e){return e||(e=0),"CAD$"+e.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},n.getDeals=function(){x.a.get("/api/Deal/GetAllVehicles").then((function(e){var t=e.data;n.setState({deals:t}),n.getMostSoldVehicles()})).catch((function(e){return console.log(e)}))},n.getMostSoldVehicles=function(){x.a.get("/api/Deal/GetMostPopularVehicle").then((function(e){var t=e.data;n.setState({vehicles:t})})).catch((function(e){return console.log(e)}))},n.state={fileList:[],uploading:!1,deals:[],vehicles:[],errors:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDeals()}},{key:"render",value:function(){var e=this,t=this.state,a=t.uploading,n=t.fileList,r={onRemove:function(t){e.setState((function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice();return n.splice(a,1),{fileList:n}}))},beforeUpload:function(t){return e.setState((function(e){return{fileList:[].concat(Object(k.a)(e.fileList),[t])}})),!1},fileList:n};return l.a.createElement("div",null,l.a.createElement(U.a,{style:{marginBottom:16}},l.a.createElement(M.a,{span:24},this.state.errors&&this.state.errors.length>0?this.state.errors.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{message:e.message,key:t,type:"error"}),l.a.createElement("br",null))})):l.a.createElement("span",null))),l.a.createElement(U.a,{style:{marginBottom:16}},l.a.createElement(M.a,{span:10,style:{marginRight:5}},l.a.createElement(V.a,{title:"Deal data upload"},l.a.createElement(B.a,r,l.a.createElement(A.a,{icon:l.a.createElement(F.a,null)},"Select File")),l.a.createElement(A.a,{type:"primary",onClick:this.handleUpload,disabled:0===n.length,loading:a,style:{marginTop:16}},a?"Uploading":"Start Upload"))),l.a.createElement(M.a,{span:12},l.a.createElement(V.a,{title:"Most often sold vehicles"},this.state.vehicles.length>0?this.state.vehicles.map((function(e,t){return l.a.createElement("p",{key:t},e)})):l.a.createElement("div",null,"No data yet")))),l.a.createElement(U.a,null,l.a.createElement(M.a,{span:24},l.a.createElement(V.a,{title:"Deals"},this.state.deals.length>0?l.a.createElement(L.a,{bordered:!0,dataSource:this.state.deals,size:"small",rowKey:"dealNumber"},l.a.createElement(W,{title:"Deal Number",dataIndex:"dealNumber",key:"dealNumber"}),l.a.createElement(W,{title:"Customer Name",dataIndex:"customerName",key:"customerName"}),l.a.createElement(W,{title:"Dealership Name",dataIndex:"dealershipName",key:"dealershipName"}),l.a.createElement(W,{title:"Vehicle",dataIndex:"vehicle",key:"vehicle"}),l.a.createElement(W,{title:"Price",dataIndex:"price",key:"price",render:function(t){return l.a.createElement("span",null,t?e.priceformat(t):0)}}),l.a.createElement(W,{title:"Date",dataIndex:"date",key:"date",render:function(e){return l.a.createElement("span",null,e?S()(e).format("MM/DD/YYYY"):"")}})):"No deals yet"))))}}]),a}(n.Component),R=(a(759),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(w,null,l.a.createElement(m.a,{exact:!0,path:"/",component:Y}))}}]),a}(n.Component));R.displayName=R.name;var $=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var J=document.getElementsByTagName("base")[0].getAttribute("href"),P=document.getElementById("root");o.a.render(l.a.createElement(i.a,{basename:J},l.a.createElement(R,null)),P),function(){if("serviceWorker"in navigator){if(new URL("/clientapp/build",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/clientapp/build","/service-worker.js");$?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):G(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):G(e)}))}}()}},[[381,1,2]]]);
//# sourceMappingURL=main.354d7352.chunk.js.map